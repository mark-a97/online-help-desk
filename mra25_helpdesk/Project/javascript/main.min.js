function init(){var sPath=window.location.pathname,sPage=sPath.substring(sPath.lastIndexOf("/")+1),mql=window.matchMedia("(max-width: 600px)"),nav=document.querySelector("#side-nav"),navBar=document.querySelector(".sideNavBar"),active=document.querySelector(".side-nav-active");if("register.php"!==sPage&&"login.php"!==sPage){var mobileS,noti,clicked;function screenTest(e){e.matches?(nav.className="side-nav",navBar.style.marginLeft="0"):nav.className="side-nav-active"}document.querySelector("#burger-i").addEventListener("click",mobileNav),document.querySelector(".notif-icon").addEventListener("click",showNotifications),document.querySelector("#profile").addEventListener("click",displayLogout),loadDoc(),loadDoc2(),mql.addEventListener("change",screenTest)}}window.addEventListener("load",init);var errors=0,returnedMessage="",NULL="",clicked=!1;function checkPage(){const currPage=document.querySelector("#page-name").textContent;"login"==currPage?document.querySelector("#btnLogin").addEventListener("click",(function(e){const emailInput=document.querySelector("#email-login").value;if(1==clicked){var div=document.querySelector(".error-div"),p=document.querySelector(".error-message");div.remove(),p.remove(),clicked=!1}if(valueChecks(emailInput,"Email",NULL,255,10),errors>0){e.preventDefault();var mainElement=document.querySelector("main"),div=document.createElement("div"),p=document.createElement("p");div.setAttribute("class","error-div"),p.setAttribute("class","error-message"),mainElement.insertBefore(div,mainElement.firstChild),div.appendChild(p),p.textContent=returnedMessage,clicked=!0}})):"register"==currPage&&document.querySelector("#btnRegister").addEventListener("click",(function(e){errors=0;const username=document.querySelector("#input-username").value,forename=document.querySelector("#input-forename").value,surname=document.querySelector("#input-surname").value,mobile=document.querySelector("#input-mobile").value,email=document.querySelector("#input-email").value,pass=document.querySelector("#input-pass").value,passConfirm=document.querySelector("#input-confirm").value;if(1==clicked){var div=document.querySelector(".error-div"),p=document.querySelector(".error-message");div.remove(),p.remove(),clicked=!1}if(valueChecks(username,"Username",NULL,255,4),valueChecks(forename,"First name","TEXT_ONLY",255,1),valueChecks(surname,"Surname","TEXT_ONLY",255,1),valueChecks(mobile,"Mobile","TEXT_ONLY",11,11),valueChecks(email,"Email",NULL,255,10),valueChecks(pass,"Password",NULL,255,8),valueChecks(passConfirm,"Password",NULL,255,8),errors>0){e.preventDefault();var mainElement=document.querySelector("main"),div=document.createElement("div"),p=document.createElement("p");div.setAttribute("class","error-div"),p.setAttribute("class","error-message"),mainElement.insertBefore(div,mainElement.firstChild),div.appendChild(p),p.textContent=returnedMessage,clicked=!0}}))}function is_numeric(number){var numbers=/^[0-9]+$/;return!!number.match(numbers)}function valueChecks(value,type,alphaNumeric,max_length,min_length){const NULL="";if(value.trim(),""!=alphaNumeric&&"YES"==alphaNumeric&&(alphanumeric(value)||(errors++,returnedMessage=type+" must be alpha numerical")),"Mobile"==type)is_numeric(value)||(errors++,returnedMessage="Mobile can only be numerical");else if("Password"==type){var lowercase=/[a-z]/g,uppercase=/[A-Z]/g,number=/[0-9]/g,specialChars=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/,returned;lowercase=!!value.match(lowercase),uppercase=!!value.match(uppercase),number=!!value.match(number),specialChars=!!specialChars.test(value),uppercase&&lowercase&&number&&specialChars||(errors++,returnedMessage="Password requirements: 8 characters, one lowercase, one uppercase, one number, and one special character")}value.length>max_length?(errors++,returnedMessage=type+" must be of suitable length (too high)"):value.length<min_length&&(errors++,returnedMessage=type+" must be of suitable length (too small)")}function displayLogout(){console.log("clicked");var dropdown=document.querySelector(".dropdown-content-name");"block"==dropdown.style.display?dropdown.style.display="none":dropdown.style.display="block"}function showNotifications(){var form=document.querySelector(".notification-box");"block"==form.style.display?form.style.display="none":form.style.display="block"}function loadDoc(){setInterval((function(){var xhttp=new XMLHttpRequest;xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&(document.getElementById("notif_test").innerHTML=this.responseText)},xhttp.open("GET","notifications/noti_list.php",!0),xhttp.send()}),1e3)}function loadDoc2(){setInterval((function(){var xhttp=new XMLHttpRequest;xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&(document.getElementById("noti_number").textContent=this.responseText)},xhttp.open("GET","notifications/noti_num.php",!0),xhttp.send()}),1e3)}function mobileNav(){var navlist=document.querySelector("#side-nav"),nav=document.querySelector(".sideNavBar"),width=document.documentElement.clientWidth;"side-nav-active"==navlist.className?(width>600?nav.style.marginLeft="-13em":nav.style.display="block",navlist.className="side-nav"):(width>600&&(nav.style.marginLeft="0"),navlist.className="side-nav-active")}